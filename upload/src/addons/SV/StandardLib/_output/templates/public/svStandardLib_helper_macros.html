<xf:macro name="date_time_input_row"
		  arg-name="date_time"
		  arg-label=""
		  arg-explain=""
		  arg-hint=""
		  arg-timestamp="{{ $xf.time }}"
		  arg-dateTimeArr="{{ [] }}"
		  arg-readOnly="{{ false }}"
		  arg-xfInit=""
		  arg-allInputAttrsHtml=""
		  arg-ymdInputAttrsHtml=""
		  arg-hhInputAttrsHtml=""
		  arg-mmInputAttrsHtml=""
		  arg-ssInputAttrsHtml=""
		  arg-tzInputAttrsHtml="">
	<xf:formrow label="{$label}" explain="{$explain}" hint="{$hint}" rowtype="input">
		<xf:macro name="date_time_input"
				  arg-name="{$name}"
				  arg-timestamp="{$timestamp}"
				  arg-dateTimeArr="{$dateTimeArr}"
				  arg-readOnly="{$readOnly}"
				  arg-xfInit="{$xfInit}"
				  arg-allInputAttrsHtml="{$allInputAttrsHtml}"
				  arg-ymdInputAttrsHtml="{$ymdInputAttrsHtml}"
				  arg-hhInputAttrsHtml="{$hhInputAttrsHtml}"
				  arg-mmInputAttrsHtml="{$mmInputAttrsHtml}"
				  arg-ssInputAttrsHtml="{$ssInputAttrsHtml}"
				  arg-tzInputAttrsHtml="{$tzInputAttrsHtml}" />
	</xf:formrow>
</xf:macro>

<xf:macro name="date_time_input"
		  arg-name="date_time"
		  arg-timestamp="{{ $xf.time }}"
		  arg-dateTimeArr="{{ [] }}"
		  arg-readOnly="{{ false }}"
		  arg-xfInit=""
		  arg-allInputAttrsHtml=""
		  arg-ymdInputAttrsHtml=""
		  arg-hhInputAttrsHtml=""
		  arg-mmInputAttrsHtml=""
		  arg-ssInputAttrsHtml=""
		  arg-tzInputAttrsHtml="">
	<xf:css src="svStandardLib_helper_macros_date_time_input.less" />
	
	<xf:set var="$selectedYMD" value="{{ $dateTimeArr.ymd ?: ($timestamp ? date($timestamp, 'picker') : '') }}" />
	<xf:set var="$selectedHour" value="{{ $dateTimeArr.hh ?: ($timestamp ? time($timestamp, 'H') : 0) }}" />
	<xf:set var="$selectedMinute" value="{{ $dateTimeArr.mm ?: ($timestamp ? time($timestamp, 'i') : 0) }}" />
	<xf:set var="$selectedSecond" value="{{ $dateTimeArr.ss ?: ($timestamp ? time($timestamp, 's') : 0) }}" />
	<xf:set var="$selectedTz" value="{{ $dateTimeArr.tz ?: $xf.visitor.timezone }}" />
	
	<div class="inputGroup-container inputGroup-containerSvStandardLibDateTime">
		<div class="inputGroup">
			<xf:macro name="date_time_wrapper" 
					  arg-name="{$name}[ymd]"
					  arg-weekStart="{{ $xf.language.week_start }}"
					  arg-readOnly="{{ $readOnly }}"
					  arg-attrsHtml="{{ ' value="' . $selectedYMD . '" ' . $allInputAttrsHtml . $ymdInputAttrsHtml }}"
					  />

			<span class="inputGroup-text">
				{{ phrase('svStandardLib_at:') }}
			</span>

			<select class="input input--inline input--autoSize" name="{$name}[hh]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }} {{ $hhInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ range(0, 23, 1) }}" value="$hour">
					<xf:set var="$readableHour" value="{{ $hour|pad('0', 2) }}" />
					<option value="{$hour}" {{ $readableHour === $selectedHour ? 'selected="selected"' : '' }}>{$readableHour}</option>
				</xf:foreach>
			</select>

			<span class="inputGroup-text">:</span>

			<select class="input input--inline input--autoSize" name="{$name}[mm]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }} {{ $mmInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ range(0, 59, 1) }}" value="$minute">
					<xf:set var="$readableMinute" value="{{ $minute|pad('0', 2) }}" />
					<option value="{$minute}" {{ $readableSecond === $selectedSecond ? 'selected="selected"' : '' }}>{$readableMinute}</option>
				</xf:foreach>
			</select>

			<span class="inputGroup-text">:</span>

			<select class="input input--inline input--autoSize" name="{$name}[ss]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }}  {{ $ssInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ range(0, 59, 1) }}" value="$second">
					<xf:set var="$readableSecond" value="{{ $second|pad('0', 2) }}" />
					<option value="{$second}" {{ $readableSecond === $selectedSecond ? 'selected="selected"' : '' }}>{$readableSecond}</option>
				</xf:foreach>
			</select>
		</div>

		<div class="inputGroup">
			<select class="input" name="{$name}[tz]" {{ $readOnly ? 'disabled="disabled"' : '' }} {{ $allInputAttrsHtml|raw }} {{ $tzInputAttrsHtml|raw }}>
				<xf:foreach loop="{{ $xf.app.data('XF:TimeZone').getTimeZoneOptions() }}" key="$value" value="$readableTz">
					<option value="{$value}"{{ $value === $selectedTz ? 'selected="selected"' : '' }}>{$readableTz}</option>
				</xf:foreach>
			</select>
		</div>
	</div>
</xf:macro>

<xf:macro name="date_time_wrapper"
		  arg-name="!"
		  arg-weekStart="!"
		  arg-readOnly="{{ false }}"
		  arg-class=""
		  arg-xfInit=""
		  arg-attrsHtml=""
		  >
	<xf:if is="$xf.versionId >= 2020000">
		<xf:js prod="xf/date_input-compiled.js" dev="vendor/pikaday/pikaday.js, xf/date_input.js" />
	</xf:if>

	<div class="inputGroup inputGroup--date inputGroup--joined inputDate">
		<input type="text" class="input input--date {$class}" autocomplete="off" data-xf-init="date-input {$xfInit}"
			data-week-start="{$weekStart}"
			{{ $readOnly ? 'readonly' : '' }}
			name="{$name}"
			{$attrsHtml|raw} />
		<span class="inputGroup-text inputDate-icon js-dateTrigger"></span>
	</div>
</xf:macro>